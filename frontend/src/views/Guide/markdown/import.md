通过导入(Import)功能，可以将外部的图像引入图库。导入有三种途径：
1. 进入「导入」页，点击「添加文件」按钮，随后选择文件导入。
2. 将文件直接拖曳到「导入」页的空白位置。
3. 使用自动导入功能主动引入本地目录的图像。

> 目前支持的图像/视频类型有: `jpeg`, `png`, `gif`, `mp4`, `webm`。

在导入列表可以确认导入的图像的准备状态。图像准备完毕后，会直接进入图库，并且可以在导入列表确认到图像的checked状态。

导入列表的记录不会久留，程序退出时，已导入的图像记录就会被移除。不过，仍然可以在右上角菜单「查看历史记录」处翻阅过去的导入历史。这些历史会保留一段时间后被移除。

然而，还可能存在导入失败的图像。在导入列表可以确认到这些图像的wrong状态，且它们暂时不会进入图库。

导入失败最常见的原因是来源数据分析失败，或无来源的项被阻止了(详见「分析来源数据」一节)。此时应该修正分析规则的错误或文件名的错误，然后尝试重试。

然而，也存在一些不常见的情况，是图像的缩略图和指纹生成失败。有时只是一时的不稳定，重试即可修复，但还有可能是遇到了稀有的图像metadata结构，或者遇到了程序的算法缺陷。

### 导入属性

导入图像时，可以设置以下类型的属性。
* **[来源](#/guide?md=source)**: 标记图像的来源。参阅「分析来源数据」一节，即可启用从文件名中分析来源的功能。
* **Tagme**: 可以自动设置图像的Todo标记。该属性可以与来源结合，在存在来源时自动剔除来源标记。
* **创建时间**：图像的引入时间，总是被固定为图像导入图库的时间点。
* **排序时间**：图像的默认排序所用的时间。选用何种属性作为时间分区有不同的方案，参照下面的文件属性描述。
* **时间分区**: 图像的引入日期。它的选用属性与排序时间一致。

文件有三种不同的时间：
* 文件创建时间：该文件在资源管理器中显示的创建时间。依据操作系统的不同，有些系统可能不支持此属性。
* 文件修改时间：该文件在资源管理器中显示的最后一次修改的时间。
* 文件导入时间：该文件导入到图库时的时间点。

导入图像的时间分区和排序时间需要选取上述的一种属性来生成。

### 分析来源数据

分析来源数据功能可以通过分析文件名，从中提取文件的[来源](#/guide?md=source)位置信息，还支持附加额外信息。

分析规则在「设置」-「导入」-「来源数据解析规则」的位置设置。
* 每条规则都是一条**正则表达式**。分析时按列表从上到下的顺序，对文件名(不包含扩展名)匹配正则表达式，选取最先匹配的那一条继续分析。
* 对每条规则，需要选取其所属的站点，并填写其“**ID生成位置**“、”**分页生成位置**“、”**页名生成位置**“。此生成位置可以填写下标(从1开始)，也可以填写使用`?<NAME>`语法标识的组名。ID和分页的生成位置都是必须存在的，而页名是可选的。
* 规则中还可以附加**额外信息**，解析到的内容会放入「预设来源」属性中。它有几种类型可选：
    1. 标题: 作为来源的标题属性。
    2. 描述: 作为来源的描述属性。
    3. 附加信息: 作为来源的一项附加信息。
    4. 标签(编码): 作为来源的一个标签。分析到的信息会作为标签的编码，还可以额外附带设置此标签的类型。
    5. 画集(编码): 作为来源的一个画集。分析到的信息会作为画集的编码。
    6. 关联项: 作为来源的一个关联项。它的内容应该是一个来源ID。

在「设置」-「导入」开启「分析来源数据」即可启用分析功能。开启「阻止无来源的导入」则会要求所有导入文件都必须有来源数据，没有来源数据的项会被认为不合法并阻止。

### 监听自动导入

「自动导入」功能将监听一个或多个本地目录位置，任何文件被添加到目录时，都将被扫描并自动导入。

在「设置」-「导入」-「监听自动导入」处设置至少一个文件夹位置，之后，在主菜单「导入」页的右上角菜单，选择「启动自动导入」，即可看到顶栏的自动导入运行状态。

自动导入功能会在顶栏报告收集文件总数，在文件导入失败时报告问题，以及在监听位置不可访问时停止监听。

自动导入功能有几个选项。
* 自动开启: 程序启动时就自动开启此功能。
* 首先扫描已存在的文件: 开始监听时，扫描监听目录下已存在的所有文件。如果不开启此选项，那么监听将只对后来添加的文件有反应。
* 移除已被导入的文件: 文件被导入时，将从原位置移除。当开启「首先扫描已存在的文件」选项时建议同步开启此选项，否则很可能面临重复扫描的问题。
